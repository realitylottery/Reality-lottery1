const express = require("express");
const mongoose = require("mongoose");
const cors = require("cors");
const bodyParser = require("body-parser");
const path = require("path");

const app = express();

// Middlewares
app.use(cors());
app.use(bodyParser.json());

// ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ù„Ù…Ø¬Ù„Ø¯ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
const __dirname = path.resolve();

// Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø«Ø§Ø¨ØªØ© Ù…Ù† Ø§Ù„Ù…Ø¬Ù„Ø¯ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
app.use(express.static(__dirname));

// Ù…ØªØºÙŠØ± Ø§Ù„Ø¨ÙˆØ±Øª Ù…Ù† Ø§Ù„Ø¨ÙŠØ¦Ø© Ø£Ùˆ 3000 Ù…Ø­Ù„ÙŠÙ‹Ø§
const PORT = process.env.PORT || 3000;

// ... (Ø¨Ù‚ÙŠØ© Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª MongoDB ÙˆØ§Ù„Ø³ÙƒÙŠÙ…Ø§Øª ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ)

// ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„Ù‚Ø±Ø§Ø¡Ø© index.html Ù…Ù† Ø§Ù„Ù…Ø¬Ù„Ø¯ Ø§Ù„Ø¬Ø°Ø±
app.get("/", (req, res) => {
  res.sendFile(path.join(__dirname, 'index.html'));
});

// ... (Ø¨Ù‚ÙŠØ© Ø§Ù„Ø±ÙˆØªØ§Øª ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ)

// Ø¨Ø¯Ø¡ Ø§Ù„Ø³ÙŠØ±ÙØ±
app.listen(PORT, () => {
  console.log(`ğŸš€ Server is running on port ${PORT}`);
  console.log(`ğŸ“ Serving files from: ${__dirname}`);
});
